<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />

  <!-- SEO強化：タイトルと説明 -->
  <title>テスラの電気代はいくら？EVとガソリン代の差額シミュレーター（年間OK）</title>
  <meta name="description" content="走行距離・電費・電気単価・燃費・ガソリン単価から、EV（テスラ等）の電気代とガソリン代の差額を計算。年間走行距離での年間差額も表示。" />

  <style>
    :root{
      --bg:#0b0c10;
      --panel:#111318;
      --panel2:#0f1116;
      --text:#e9eef6;
      --muted:#a9b3c2;
      --line:#242938;
      --accent:#e82127; /* Teslaっぽい赤 */
      --accent2:#ff4d4d;
      --ok:#2fd46c;
      --bad:#ffb020;
      --shadow: 0 16px 50px rgba(0,0,0,.45);
      --radius: 16px;
    }
    *{ box-sizing:border-box; }
    body{
      margin:0;
      font-family: system-ui, -apple-system, "Segoe UI", Roboto, "Noto Sans JP", sans-serif;
      background: radial-gradient(1200px 600px at 20% -10%, rgba(232,33,39,.25), transparent 60%),
                  radial-gradient(900px 500px at 110% 10%, rgba(79,156,255,.14), transparent 55%),
                  var(--bg);
      color:var(--text);
    }
    .wrap{
      max-width: 920px;
      margin: 0 auto;
      padding: 26px 16px 60px;
    }
    header{
      display:flex;
      align-items:flex-end;
      justify-content:space-between;
      gap:16px;
      margin-bottom: 18px;
    }
    .brand{
      display:flex; flex-direction:column; gap:6px;
    }
    .logoLine{
      display:flex; align-items:center; gap:10px;
      letter-spacing:.08em;
      text-transform: uppercase;
      font-weight:700;
    }
    .dot{
      width:10px; height:10px; border-radius:999px;
      background: linear-gradient(135deg, var(--accent), var(--accent2));
      box-shadow: 0 0 18px rgba(232,33,39,.55);
    }
    h1{
      margin:0;
      font-size: 20px;
      letter-spacing:.02em;
    }
    .sub{
      margin:0;
      color:var(--muted);
      font-size: 13px;
      line-height: 1.5;
      max-width: 58ch;
    }
    .pill{
      border:1px solid rgba(232,33,39,.35);
      color:var(--text);
      padding: 8px 10px;
      border-radius: 999px;
      font-size: 12px;
      background: rgba(232,33,39,.08);
      white-space:nowrap;
    }

    .grid{
      display:grid;
      grid-template-columns: 1fr;
      gap: 14px;
    }
    @media (min-width: 860px){
      .grid{ grid-template-columns: 1fr 1fr; }
    }

    .card{
      background: linear-gradient(180deg, rgba(255,255,255,.03), transparent 40%), var(--panel);
      border: 1px solid rgba(255,255,255,.06);
      border-radius: var(--radius);
      padding: 16px;
      box-shadow: var(--shadow);
    }
    .card h2{
      margin:0 0 10px;
      font-size: 14px;
      letter-spacing: .02em;
      color: #f2f6ff;
      display:flex; align-items:center; gap:8px;
    }
    .tag{
      font-size: 11px;
      padding: 4px 8px;
      border-radius: 999px;
      border: 1px solid rgba(255,255,255,.10);
      color: var(--muted);
      background: rgba(255,255,255,.03);
    }

    label{
      display:block;
      margin-top: 12px;
      font-size: 12px;
      color: var(--muted);
    }
    input{
      width:100%;
      margin-top: 6px;
      padding: 12px 12px;
      border-radius: 12px;
      border: 1px solid rgba(255,255,255,.10);
      background: var(--panel2);
      color: var(--text);
      font-size: 15px;
      outline: none;
    }
    input:focus{
      border-color: rgba(232,33,39,.55);
      box-shadow: 0 0 0 3px rgba(232,33,39,.18);
    }

    .row{
      display:grid;
      grid-template-columns: 1fr 1fr;
      gap: 10px;
    }

    .actions{
      display:flex;
      gap: 10px;
      margin-top: 14px;
      align-items:center;
      flex-wrap: wrap;
    }
    button{
      border: 0;
      padding: 11px 14px;
      border-radius: 12px;
      font-weight: 700;
      cursor: pointer;
      color: white;
      background: linear-gradient(135deg, var(--accent), #ff3b3b);
      box-shadow: 0 12px 30px rgba(232,33,39,.22);
    }
    button:active{ transform: translateY(1px); }

    .ghost{
      background: transparent;
      border: 1px solid rgba(255,255,255,.12);
      color: var(--text);
      box-shadow: none;
      font-weight: 600;
    }

    .out{
      margin-top: 14px;
      padding: 14px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(255,255,255,.03);
      line-height: 1.6;
    }
    .big{
      font-size: 18px;
      font-weight: 800;
      letter-spacing: .01em;
    }
    .muted{ color: var(--muted); }

    .kpi{
      display:grid;
      grid-template-columns: 1fr;
      gap: 10px;
      margin-top: 10px;
    }
    @media (min-width: 860px){
      .kpi{ grid-template-columns: 1fr 1fr; }
    }
    .kpiBox{
      padding: 12px;
      border-radius: 14px;
      border: 1px solid rgba(255,255,255,.08);
      background: rgba(17,19,24,.6);
    }
    .kpiBox .t{ font-size: 12px; color: var(--muted); }
    .kpiBox .v{ font-size: 18px; font-weight: 800; margin-top: 4px; }

    footer{
      margin-top: 18px;
      color: var(--muted);
      font-size: 12px;
      line-height: 1.6;
    }
    a{ color:#cfe0ff; }
  </style>
</head>

<body>
  <div class="wrap">
    <header>
      <div class="brand">
        <div class="logoLine"><span class="dot"></span> EV COST</div>
        <h1>EV（電気） vs ガソリン（比較）コスト計算</h1>
        <p class="sub">
          走行距離と電費（Wh/km）からEVの電気代、燃費（km/L）からガソリン代を計算し、差額を表示します。
          年間走行距離も入れると「年間いくら得するか」まで出せます。
        </p>
      </div>
      <div class="pill">公開版 / GitHub Pages</div>
    </header>

    <div class="grid">
      <div class="card">
        <h2>EV（テスラなど） <span class="tag">電気代</span></h2>

        <div class="row">
          <label>走行距離（km）
            <input id="km" type="number" inputmode="decimal" placeholder="例：500" value="500">
          </label>
          <label>EVの電費（Wh/km）
            <input id="whkm" type="number" inputmode="decimal" placeholder="例：150" value="150">
          </label>
        </div>

        <div class="row">
          <label>自宅充電の単価（円/kWh）
            <input id="yenPerKwhHome" type="number" inputmode="decimal" placeholder="例：35" value="35">
          </label>
          <label>外部/急速充電の単価（円/kWh）
            <input id="yenPerKwhFast" type="number" inputmode="decimal" placeholder="例：60" value="60">
          </label>
        </div>

        <label>自宅充電の割合（%）
          <input id="homeRate" type="number" inputmode="decimal" placeholder="例：80" value="80">
        </label>

        <label>年間走行距離（km/年）
          <input id="annualKm" type="number" inputmode="decimal" placeholder="例：10000" value="10000">
        </label>

        <div class="actions">
          <button onclick="calc()">計算する</button>
          <button class="ghost" onclick="fillTeslaLike()">テスラっぽい初期値</button>
        </div>

        <div class="out" id="evOut">
          <div class="muted">ここにEV側の計算が出ます</div>
        </div>
      </div>

      <div class="card">
        <h2>ガソリン車 <span class="tag">燃料代</span></h2>

        <label>ガソリン車の燃費（km/L）
          <input id="kmPerL" type="number" inputmode="decimal" placeholder="例：15" value="15">
        </label>

        <label>ガソリン単価（円/L）
          <input id="yenPerL" type="number" inputmode="decimal" placeholder="例：170" value="170">
        </label>

        <div class="out" id="out">
          <div class="muted">ここに結果が出ます</div>
        </div>

        <div class="kpi">
          <div class="kpiBox">
            <div class="t">今回の差額</div>
            <div class="v" id="kpiTrip">—</div>
          </div>
          <div class="kpiBox">
            <div class="t">年間の差額</div>
            <div class="v" id="kpiYear">—</div>
          </div>
        </div>

        <footer>
          ※ 充電単価は「自宅」と「外部」を混ぜて平均単価（加重平均）で計算しています。<br>
          ※ これは目安です（保険・税金・車両価格差・タイヤ等は含みません）。
        </footer>
      </div>
    </div>
  </div>

<script>
  function num(id){ return Number(document.getElementById(id).value); }
  function yen(x){ return Math.round(x).toLocaleString('ja-JP') + " 円"; }

  function fillTeslaLike(){
    // “それっぽい”初期値（好みで調整OK）
    document.getElementById("whkm").value = 155;
    document.getElementById("yenPerKwhHome").value = 32;
    document.getElementById("yenPerKwhFast").value = 65;
    document.getElementById("homeRate").value = 75;
    document.getElementById("kmPerL").value = 14;
    document.getElementById("yenPerL").value = 175;
    document.getElementById("annualKm").value = 12000;
    calc();
  }

  function validate(){
    const km = num("km");
    const whkm = num("whkm");
    const yenPerKwhHome = num("yenPerKwhHome");
    const yenPerKwhFast = num("yenPerKwhFast");
    const homeRate = num("homeRate");
    const annualKm = num("annualKm");
    const kmPerL = num("kmPerL");
    const yenPerL = num("yenPerL");

    if([km, whkm, yenPerKwhHome, yenPerKwhFast, annualKm, kmPerL, yenPerL].some(v => !isFinite(v) || v <= 0)){
      return "数値を正しく入力してください（0より大きい数）。";
    }
    if(!isFinite(homeRate) || homeRate < 0 || homeRate > 100){
      return "自宅充電の割合（%）は 0〜100 で入力してください。";
    }
    return null;
  }

  function calc(){
    const err = validate();
    if(err){
      document.getElementById("out").innerHTML = `<span style="color:#ffb020;font-weight:800;">${err}</span>`;
      document.getElementById("evOut").innerHTML = `<span style="color:#ffb020;font-weight:800;">${err}</span>`;
      document.getElementById("kpiTrip").textContent = "—";
      document.getElementById("kpiYear").textContent = "—";
      return;
    }

    const km = num("km");
    const whkm = num("whkm");
    const yenPerKwhHome = num("yenPerKwhHome");
    const yenPerKwhFast = num("yenPerKwhFast");
    const homeRate = num("homeRate");
    const annualKm = num("annualKm");
    const kmPerL = num("kmPerL");
    const yenPerL = num("yenPerL");

    const home = homeRate / 100;
    const blendedYenPerKwh = yenPerKwhHome * home + yenPerKwhFast * (1 - home);

    // Trip
    const kwh = (km * whkm) / 1000;
    const evCost = kwh * blendedYenPerKwh;

    const liters = km / kmPerL;
    const gasCost = liters * yenPerL;

    const diff = gasCost - evCost; // +ならEVが得
    const evBetter = diff >= 0;

    // Year
    const annualKwh = (annualKm * whkm) / 1000;
    const annualEv = annualKwh * blendedYenPerKwh;
    const annualGas = (annualKm / kmPerL) * yenPerL;
    const annualDiff = annualGas - annualEv;

    // Outputs
    document.getElementById("evOut").innerHTML =
      `<div class="muted">平均充電単価（加重平均）</div>
       <div class="big">${blendedYenPerKwh.toFixed(1)} 円/kWh</div>
       <div class="muted" style="margin-top:8px;">
         今回の消費：${kwh.toFixed(2)} kWh（${whkm.toFixed(0)} Wh/km × ${km.toFixed(0)} km）<br>
         今回のEV電気代：<b>${yen(evCost)}</b>
       </div>`;

    document.getElementById("out").innerHTML =
      `<div class="big" style="color:${evBetter ? 'var(--ok)' : 'var(--bad)'};">
         ${evBetter ? "EVの方が安い" : "ガソリン車の方が安い"}
       </div>
       <div class="muted" style="margin-top:8px;">
         ガソリン代：<b>${yen(gasCost)}</b>（消費 ${liters.toFixed(2)} L）<br>
         EV電気代：<b>${yen(evCost)}</b>
       </div>
       <div style="margin-top:10px;">
         差額：<b>${yen(Math.abs(diff))}</b>（${evBetter ? "EVが得" : "ガソリンが得"}）
       </div>
       <hr style="border:0;border-top:1px solid rgba(255,255,255,.08);margin:12px 0;">
       <div class="muted">
         年間（${annualKm.toFixed(0)} km）<br>
         ガソリン：<b>${yen(annualGas)}</b> / EV：<b>${yen(annualEv)}</b><br>
         年間差額：<b>${yen(Math.abs(annualDiff))}</b>（${annualDiff >= 0 ? "EVが得" : "ガソリンが得"}）
       </div>`;

    document.getElementById("kpiTrip").textContent = yen(Math.abs(diff));
    document.getElementById("kpiYear").textContent = yen(Math.abs(annualDiff));
  }

  // 初回計算
  calc();
</script>
</body>
</html>

