<!doctype html>
<html lang="ja">
<head>
  <meta charset="utf-8" />
  <meta name="viewport" content="width=device-width,initial-scale=1" />
  <title>EV電気代 vs ガソリン代 計算</title>
  <style>
    body { font-family: system-ui, sans-serif; max-width: 720px; margin: 30px auto; padding: 0 16px; }
    h1 { font-size: 20px; }
    label { display:block; margin-top: 12px; }
    input { width: 100%; padding: 10px; margin-top: 6px; font-size: 16px; }
    button { margin-top: 14px; padding: 10px 14px; font-size: 16px; cursor: pointer; }
    .box { margin-top: 16px; padding: 12px; border: 1px solid #ddd; border-radius: 8px; }
    .small { color:#666; font-size: 13px; }
  </style>
</head>
<body>
  <h1>EV（電気） vs ガソリン（比較）コスト計算</h1>
  <div class="small">走行距離から、EVの電気代とガソリン車の燃料代を比較します。</div>

  <label>走行距離（km）
    <input id="km" type="number" inputmode="decimal" placeholder="例：500" value="500">
  </label>

  <label>EVの電費（Wh/km）
    <input id="whkm" type="number" inputmode="decimal" placeholder="例：150" value="150">
  </label>

  <label>電気単価（円/kWh）
    <input id="yenPerKwh" type="number" inputmode="decimal" placeholder="例：35" value="35">
  </label>

  <hr style="margin:18px 0;">

  <label>ガソリン車の燃費（km/L）
    <input id="kmPerL" type="number" inputmode="decimal" placeholder="例：15" value="15">
  </label>

  <label>ガソリン単価（円/L）
    <input id="yenPerL" type="number" inputmode="decimal" placeholder="例：170" value="170">
  </label>

  <button onclick="calc()">計算する</button>

  <div class="box" id="out">ここに結果が出ます</div>

  <script>
    function num(id){ return Number(document.getElementById(id).value); }
    function yen(x){ return Math.round(x).toLocaleString('ja-JP') + " 円"; }

    function calc(){
      const km = num("km");
      const whkm = num("whkm");
      const yenPerKwh = num("yenPerKwh");
      const kmPerL = num("kmPerL");
      const yenPerL = num("yenPerL");

      if([km, whkm, yenPerKwh, kmPerL, yenPerL].some(v => !isFinite(v) || v <= 0)){
        document.getElementById("out").innerText = "数値を正しく入力してください（0より大きい数）。";
        return;
      }

      // EV電気代：km * Wh/km → Wh → kWh → 円
      const kwh = (km * whkm) / 1000;
      const evCost = kwh * yenPerKwh;

      // ガソリン代：km / (km/L) → L → 円
      const liters = km / kmPerL;
      const gasCost = liters * yenPerL;

      const diff = gasCost - evCost; // プラスならEVが得
      const better = diff >= 0 ? "EVの方が安い" : "ガソリン車の方が安い";

      document.getElementById("out").innerHTML =
        `<b>${better}</b><br><br>` +
        `EV電気代：${yen(evCost)}（消費電力量 ${kwh.toFixed(2)} kWh）<br>` +
        `ガソリン代：${yen(gasCost)}（消費燃料 ${liters.toFixed(2)} L）<br><br>` +
        `差額：<b>${yen(Math.abs(diff))}</b>（${diff>=0 ? "EVが得" : "ガソリンが得"}）`;
    }

    // 初回計算
    calc();
  </script>
</body>
</html>
